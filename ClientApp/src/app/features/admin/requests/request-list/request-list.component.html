<div class="list-container">
    <div class="header">
        <h2>Đề nghị mượn, sửa chữa</h2>
    </div>

    <div class="mat-elevation-z8">
        <table mat-table [dataSource]="requests">

            <ng-container matColumnDef="machine">
                <th mat-header-cell *matHeaderCellDef> Khí tài </th>
                <td mat-cell *matCellDef="let row"> {{row.machineName}} </td>
            </ng-container>

            <ng-container matColumnDef="fromUser">
                <th mat-header-cell *matHeaderCellDef> Đơn vị gửi </th>
                <td mat-cell *matCellDef="let row"> {{row.fromUserName}} </td>
            </ng-container>

            <ng-container matColumnDef="toUser">
                <th mat-header-cell *matHeaderCellDef> Đơn vị nhận </th>
                <td mat-cell *matCellDef="let row"> {{row.toUserName}} </td>
            </ng-container>

            <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef> Loại khí tài </th>
                <td mat-cell *matCellDef="let row">
                    <span class="badge" [ngClass]="row.requestType === 0 ? 'borrow' : 'repair'">
                        {{row.requestType === 0 ? 'Mượn' : 'Sửa chữa'}}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="reason">
                <th mat-header-cell *matHeaderCellDef> Lý do </th>
                <td mat-cell *matCellDef="let row"> {{row.reason}} </td>
            </ng-container>

            <ng-container matColumnDef="created">
                <th mat-header-cell *matHeaderCellDef> Ngày bàn giao </th>
                <td mat-cell *matCellDef="let row"> {{row.createdAt | date:'short'}} </td>
            </ng-container>

            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Thay đổi </th>
                <td mat-cell *matCellDef="let row">
                    <button mat-icon-button color="primary" (click)="approve(row.id)" matTooltip="Approve">
                        <mat-icon>check_circle</mat-icon>
                    </button>
                    <button mat-icon-button color="warn" (click)="reject(row.id)" matTooltip="Reject">
                        <mat-icon>cancel</mat-icon>
                    </button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="7" style="text-align:center; padding: 20px;">
                    Không có đề nghị mượn, sửa chữa.
                </td>
            </tr>
        </table>
    </div>
</div>